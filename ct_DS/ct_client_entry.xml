<?xml version="1.0" encoding="iso-8859-1"?>

<!--
  Please see the license.html file included with this distribution for
  attribution and copyright information.
-->

<root>
	<!-- Top sub window (the initiative order stack) -->
	<windowclass name="ct_entry">
		<margins control="0,0,0,2" />
		<frame>ctentrybox</frame>
		<sizelimits>
			<minimum height="40" />
		</sizelimits>
		<script file="ct_DS/scripts/ct_DS_entry.lua" />
		<sheetdata>
			<htx name="token3Dflat" />
			<hs name="tokenrefid" />
			<hs name="tokenrefnode" />

			<hsx name="senses" />

			<spacer_ctentry_active_top name="active_spacer_top" />
			<anchor_ct_entry_left name="leftanchor" />
			<anchor_ct_entry_right name="rightanchor" />

			<!-- <button_ctentry_active name="active" /> -->
			<token_ctentry name="token" />

			<button_ct_entry_idelete name="idelete" />
			<link_ct_entry name="link" >
				<script file="campaign/scripts/link_permission.lua" />
			</link_ct_entry>

			<button_ct_section_effects name="button_section_effects" />
			<button_ct_section_space name="button_section_space" />
			<button_ct_section_targets name="button_section_targets" />

			<button_ctentry_friendfoe name="friendfoe" />
			
			<number_ctentry_stamina name="stamina.current" />
			
			<!-- <number_ctentry_initresult name="initresult" /> -->

			<!-- This button allows players to remove themselves from the initiative order -->
			<button_initiative_remove name="remove"  >
			<script>
				function onButtonPress()
				    local nodeWin = window.getDatabaseNode();
    				local nCurrent = DB.getValue(nodeWin, "initresult");
					DB.setValue(nodeWin, "initresult", "number", 0);
				end
			</script>
			</button_initiative_remove>

			<string_ct_entry_name name="name" />
			<string_ct_entry_name_nonid name="nonid_name" />

			<sub_ct_section name="sub_targets" />
			<sub_ct_section name="sub_space" />
			<sub_ct_section name="sub_effects" />

			<!-- Quick labels -->
			<string_ct_entry_targets name="summary_targets" />
			<string_ct_entry_effects name="summary_effects" />

			<!-- NOTE: ID/Visibility controls moved to bottom to avoid sections overlaying it -->
			<button_ct_entry_isidentified name="isidentified" />
			<button_ct_entry_tokenvis name="tokenvis" />

			<spacer_ctentry_middle name="spacer" />
			<spacer_ctentry_active_bottom name="active_spacer_bottom" />
		</sheetdata>
	</windowclass>

<!-- heroes combat tracker window -->
	<windowclass name="ct_entry_heroes">
		<margins control="0,0,0,2" />
		<frame>ctentrybox_friend</frame>
		<sizelimits>
			<minimum height="40" />
		</sizelimits>
		<script file="ct_DS/scripts/ct_entry_heroes.lua" />
		<sheetdata>
			<htx name="token3Dflat" />
			<hs name="tokenrefid" />
			<hs name="tokenrefnode" />
			<hsx name="senses" />
			<spacer_ctentry_active_top name="active_spacer_top" />

			<!-- LEFT ANCHOR ITEMS -->
			<anchor_ct_entry_left name="leftanchor" />

			<button_initiative_gone name="gone"  >
				<script>
					function onButtonPress()
						if Session.IsHost then
							local nodeWin = window.getDatabaseNode();
							local nCurrent = DB.getValue(nodeWin, "initresult");
							DB.setValue(nodeWin, "initresult", "number", 1);
						else
							OOB_MSGTYPE_GONE = "Initiative Gone";
							OOBManager.registerOOBMsgHandler(OOB_MSGTYPE_GONE, ActionInit.handlePlayerGone);
							ActionsManager.registerResultHandler("init", ActionInit.onResolve);
						end
					end
				</script>
			</button_initiative_gone>

			<!-- RIGHT ANCHOR ITEMS -->
			<anchor_ct_entry_right name="rightanchor" />
			
			<token_ctentry name="token" />

			<button_ct_entry_idelete name="idelete" />
			<link_ct_entry name="link" />

			<number_ctentry_stamina name="stamina.current" />

			<button_ctentry_friendfoe name="friendfoe" />

			<string_ct_entry_name name="name" />
			<string_ct_entry_name_nonid name="nonid_name" />

			<sub_ct_section name="sub_targets" />
			<sub_ct_section name="sub_space" />
			<sub_ct_section name="sub_effects" />

			<!-- DEPRACATED -->
			<!-- <button_ctentry_active name="active" /> -->
			<!-- <button_ct_section_effects name="button_section_effects" /> -->
			<!-- <button_ct_section_space name="button_section_space" /> -->
			<!-- <button_ct_section_targets name="button_section_targets" /> -->
			<!-- <number_ctentry_initresult name="initresult" /> -->

			<!-- Quick labels -->
			<string_ct_entry_targets name="summary_targets" />
			<string_ct_entry_effects name="summary_effects" />

			<!-- NOTE: ID/Visibility controls moved to bottom to avoid sections overlaying it -->
			<button_ct_entry_isidentified name="isidentified" />
			<button_ct_entry_tokenvis name="tokenvis" />

			<spacer_ctentry_middle name="spacer" />
			<spacer_ctentry_active_bottom name="active_spacer_bottom" />
		</sheetdata>
	</windowclass>

<!-- monsters combat tracker window -->
	<windowclass name="ct_entry_monsters">
		<margins control="0,0,0,2" />
		<frame>ctentrybox_foe</frame>
		<sizelimits>
			<minimum height="40" />
		</sizelimits>
		<script file="ct_DS/scripts/ct_entry_monsters.lua" />
		<sheetdata>
			<htx name="token3Dflat" />
			<hs name="tokenrefid" />
			<hs name="tokenrefnode" />

			<hsx name="senses" />

			<spacer_ctentry_active_top name="active_spacer_top" />
			<anchor_ct_entry_left name="leftanchor" />
			<anchor_ct_entry_right name="rightanchor" />

			<button_ctentry_active name="active" />
			<token_ctentry name="token" />

			<button_ct_entry_idelete name="idelete" />
			<link_ct_entry name="link" >
				<script file="campaign/scripts/link_permission.lua" />
			</link_ct_entry>

			<number_ctentry_stamina name="stamina.current" />

			<!-- <button_ct_section_effects name="button_section_effects" /> -->
			<!-- <button_ct_section_space name="button_section_space" /> -->
			<!-- <button_ct_section_targets name="button_section_targets" /> -->

			<button_ctentry_friendfoe name="friendfoe" />
			<button_initiative_gone name="gone"  >
			<script>
				function onButtonPress()
				    local nodeWin = window.getDatabaseNode();
    				local nCurrent = DB.getValue(nodeWin, "initresult");
					DB.setValue(nodeWin, "initresult", "number", 1);
				end
			</script>
			</button_initiative_gone>

			<!-- <number_ctentry_initresult name="initresult" /> -->

			<string_ct_entry_name name="name" />
			<string_ct_entry_name_nonid name="nonid_name" />

			<sub_ct_section name="sub_targets" />
			<sub_ct_section name="sub_space" />
			<sub_ct_section name="sub_effects" />

			<!-- Quick labels -->
			<string_ct_entry_targets name="summary_targets" />
			<string_ct_entry_effects name="summary_effects" />

			<!-- NOTE: ID/Visibility controls moved to bottom to avoid sections overlaying it -->
			<button_ct_entry_isidentified name="isidentified" />
			<button_ct_entry_tokenvis name="tokenvis" />

			<spacer_ctentry_middle name="spacer" />
			<spacer_ctentry_active_bottom name="active_spacer_bottom" />
		</sheetdata>
	</windowclass>
</root>
